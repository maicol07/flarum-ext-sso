{"version":3,"file":"admin.js","mappings":"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","sources":["webpack://@maicol07/flarum-ext-sso/webpack/bootstrap","webpack://@maicol07/flarum-ext-sso/webpack/runtime/compat get default export","webpack://@maicol07/flarum-ext-sso/webpack/runtime/define property getters","webpack://@maicol07/flarum-ext-sso/webpack/runtime/hasOwnProperty shorthand","webpack://@maicol07/flarum-ext-sso/webpack/runtime/make namespace object","webpack://@maicol07/flarum-ext-sso/external root \"flarum.core.compat['admin/app']\"","webpack://@maicol07/flarum-ext-sso/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@maicol07/flarum-ext-sso/external root \"flarum.core.compat['admin/components/ExtensionPage']\"","webpack://@maicol07/flarum-ext-sso/external root \"flarum.core.compat['common/components/Button']\"","webpack://@maicol07/flarum-ext-sso/./src/admin/SettingsPage.tsx","webpack://@maicol07/flarum-ext-sso/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@maicol07/flarum-ext-sso/./src/admin/index.tsx"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/app'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/components/ExtensionPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","import ExtensionPage, { ExtensionPageAttrs } from 'flarum/admin/components/ExtensionPage';\r\nimport app from 'flarum/admin/app';\r\nimport Mithril from 'mithril';\r\nimport { SettingsComponentOptions } from 'flarum/admin/components/AdminPage';\r\nimport Button from 'flarum/common/components/Button';\r\n\r\nexport class SettingsPage extends ExtensionPage {\r\n  content(vnode: Mithril.VnodeDOM<ExtensionPageAttrs, this>): JSX.Element {\r\n    const settings = app.extensionData.getSettings(this.extension.id);\r\n\r\n    const flarumSettings = this.flarumClientSettings(1);\r\n\r\n    return (\r\n      <div className=\"ExtensionPage-settings\">\r\n        <div className=\"container\">\r\n          <div className=\"Form\">\r\n            <div className=\"Form-group\">\r\n              {this.buildSettingComponent({\r\n                type: 'checkbox',\r\n                label: 'Provider mode',\r\n                setting: 'maicol07-sso.provider_mode',\r\n                help: app.translator.trans('maicol07-sso.admin.settings.provider_mode'),\r\n                className: 'maicol07-sso--provider-mode',\r\n              })}\r\n              <div hidden={!this.booleanSetting('provider_mode')}>\r\n                <div className=\"Form-group\">\r\n                  <table>\r\n                    <thead>\r\n                      <tr>\r\n                        {flarumSettings.map((setting) => (\r\n                          <th key={setting.setting}>\r\n                            {setting.label}\r\n                            <br />\r\n                            <span className=\"helpText\" style={{ fontWeight: 'normal' }}>\r\n                              {setting.help}\r\n                            </span>\r\n                          </th>\r\n                        ))}\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>{this.clientRows()}</tbody>\r\n                  </table>\r\n                </div>\r\n                <Button className=\"Button\" aria-label=\"Add instance\" icon=\"fa fa-plus\" onclick={this.addRow.bind(this)}>\r\n                  Add Flarum instance\r\n                </Button>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"Form-group\" hidden={this.booleanSetting('provider_mode')}>\r\n              <hr />\r\n              <div className=\"Form-group\">{this.generalClientSettings().map(this.buildSettingComponent.bind(this))}</div>\r\n              {settings?.map(this.buildSettingComponent.bind(this))}\r\n\r\n              <hr />\r\n\r\n              <div className=\"Form-group\">\r\n                <h4>{app.translator.trans('maicol07-sso.admin.settings.jwt_section_subtitle')}</h4>\r\n                {this.jwtSettings().map(this.buildSettingComponent.bind(this))}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"Form-group\">{this.submitButton()}</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  oncreate(vnode: Mithril.VnodeDOM<ExtensionPageAttrs, this>) {\r\n    super.oncreate(vnode);\r\n    this.setting('maicol07-sso.provider_mode').map(() => m.redraw());\r\n  }\r\n\r\n  addRow() {\r\n    const next = this.clientRows().length + 1;\r\n    app.data.settings[`maicol07-sso.client${next}_url`] = '';\r\n  }\r\n\r\n  clientRows() {\r\n    const clientRows = [];\r\n\r\n    let i = 1;\r\n    while (`maicol07-sso.client${i}_url` in app.data.settings) {\r\n      clientRows.push(\r\n        <tr key={`client${i}`}>\r\n          {this.flarumClientSettings(i).map((setting) => {\r\n            setting.label = undefined;\r\n            setting.help = undefined;\r\n            return <td key={setting.setting}>{this.buildSettingComponent(setting)}</td>;\r\n          })}\r\n        </tr>\r\n      );\r\n      i++;\r\n    }\r\n\r\n    return clientRows;\r\n  }\r\n\r\n  flarumClientSettings(clientNumber: number): SettingsComponentOptions[] {\r\n    return [\r\n      {\r\n        setting: `maicol07-sso.client${clientNumber}_name`,\r\n        type: 'text',\r\n        label: app.translator.trans('maicol07-sso.admin.settings.client_name'),\r\n        help: app.translator.trans('maicol07-sso.admin.settings.client_name_help'),\r\n      },\r\n      {\r\n        setting: `maicol07-sso.client${clientNumber}_url`,\r\n        type: 'text',\r\n        label: app.translator.trans('maicol07-sso.admin.settings.client_url'),\r\n        help: app.translator.trans('maicol07-sso.admin.settings.client_url_help'),\r\n      },\r\n      {\r\n        setting: `maicol07-sso.client${clientNumber}_api_key`,\r\n        type: 'password',\r\n        label: app.translator.trans('maicol07-sso.admin.settings.client_api_key'),\r\n        help: app.translator.trans('maicol07-sso.admin.settings.client_api_key_help'),\r\n      },\r\n      {\r\n        setting: `maicol07-sso.client${clientNumber}_password_token`,\r\n        type: 'password',\r\n        label: app.translator.trans('maicol07-sso.admin.settings.client_password_token'),\r\n        help: app.translator.trans('maicol07-sso.admin.settings.client_password_token_help'),\r\n      },\r\n      {\r\n        setting: `maicol07-sso.client${clientNumber}_verify_ssl`,\r\n        type: 'checkbox',\r\n        label: app.translator.trans('maicol07-sso.admin.settings.client_verify_ssl'),\r\n        help: app.translator.trans('maicol07-sso.admin.settings.client_verify_ssl_help'),\r\n      },\r\n    ];\r\n  }\r\n\r\n  generalClientSettings(): SettingsComponentOptions[] {\r\n    return [\r\n      {\r\n        setting: 'maicol07-sso.login_url',\r\n        label: app.translator.trans('maicol07-sso.admin.settings.login_url'),\r\n        type: 'url',\r\n      },\r\n      {\r\n        setting: 'maicol07-sso.signup_url',\r\n        label: app.translator.trans('maicol07-sso.admin.settings.signup_url'),\r\n        type: 'url',\r\n      },\r\n      {\r\n        setting: 'maicol07-sso.logout_url',\r\n        label: app.translator.trans('maicol07-sso.admin.settings.logout_url'),\r\n        type: 'url',\r\n      },\r\n      {\r\n        setting: 'maicol07-sso.manage_account_url',\r\n        label: app.translator.trans('maicol07-sso.admin.settings.manage_account_url'),\r\n        type: 'url',\r\n      },\r\n      {\r\n        setting: 'maicol07-sso.cookies_prefix',\r\n        label: app.translator.trans('maicol07-sso.admin.settings.cookies_prefix'),\r\n        type: 'text',\r\n      },\r\n    ];\r\n  }\r\n\r\n  jwtSettings(): SettingsComponentOptions[] {\r\n    return [\r\n      {\r\n        setting: 'maicol07-sso.jwt_iss',\r\n        label: app.translator.trans('maicol07-sso.admin.settings.jwt_iss'),\r\n        type: 'text',\r\n      },\r\n      {\r\n        setting: 'maicol07-sso.jwt_signing_algorithm',\r\n        label: app.translator.trans('maicol07-sso.admin.settings.jwt_signing_algorithm'),\r\n        type: 'select',\r\n        options: {\r\n          Sha256: 'Sha256',\r\n          Sha384: 'Sha384',\r\n          Sha512: 'Sha512',\r\n        },\r\n        default: 'Sha256',\r\n      },\r\n      {\r\n        setting: 'maicol07-sso.jwt_signer_key',\r\n        label: app.translator.trans('maicol07-sso.admin.settings.jwt_signer_key'),\r\n        type: 'text',\r\n      },\r\n    ];\r\n  }\r\n\r\n  booleanSetting(setting: string): boolean {\r\n    return Boolean(Number(this.setting(`maicol07-sso.${setting}`)()));\r\n  }\r\n}\r\n","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","import app from 'flarum/admin/app';\nimport { SettingsPage } from './SettingsPage';\n\napp.initializers.add('maicol07-sso', () => {\n  app.extensionData\n    .for('maicol07-sso')\n    .registerSetting({\n      setting: 'maicol07-sso.manage_account_btn_open_in_new_tab',\n      label: app.translator.trans('maicol07-sso.admin.settings.manage_account_btn_open_in_new_tab'),\n      type: 'boolean',\n    })\n    .registerSetting({\n      setting: 'maicol07-sso.remove_login_btn',\n      label: app.translator.trans('maicol07-sso.admin.settings.remove_login_btn'),\n      type: 'boolean',\n    })\n    .registerSetting({\n      setting: 'maicol07-sso.remove_signup_btn',\n      label: app.translator.trans('maicol07-sso.admin.settings.remove_signup_btn'),\n      type: 'boolean',\n    })\n    .registerSetting({\n      setting: 'maicol07-sso.disable_self_activation',\n      label: app.translator.trans('maicol07-sso.admin.settings.disable_self_activation'),\n      type: 'boolean',\n    })\n    .registerPage(SettingsPage);\n});\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","_setPrototypeOf","p","setPrototypeOf","bind","__proto__","SettingsPage","_ExtensionPage","subClass","superClass","apply","arguments","create","constructor","_proto","content","vnode","settings","app","this","extension","id","flarumSettings","flarumClientSettings","m","className","buildSettingComponent","type","label","setting","help","hidden","booleanSetting","map","style","fontWeight","clientRows","Button","icon","onclick","addRow","generalClientSettings","jwtSettings","submitButton","oncreate","redraw","next","length","_this","i","push","undefined","clientNumber","options","Sha256","Sha384","Sha512","default","Boolean","Number","ExtensionPage","registerSetting","registerPage"],"sourceRoot":""}