{"version":3,"file":"admin.js","mappings":"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","sources":["webpack://@maicol07/flarum-ext-sso/webpack/bootstrap","webpack://@maicol07/flarum-ext-sso/webpack/runtime/compat get default export","webpack://@maicol07/flarum-ext-sso/webpack/runtime/define property getters","webpack://@maicol07/flarum-ext-sso/webpack/runtime/hasOwnProperty shorthand","webpack://@maicol07/flarum-ext-sso/external root \"flarum.reg.get('core', 'admin/app')\"","webpack://@maicol07/flarum-ext-sso/external root \"flarum.reg.get('core', 'admin/components/ExtensionPage')\"","webpack://@maicol07/flarum-ext-sso/external root \"flarum.reg.get('core', 'common/components/Button')\"","webpack://@maicol07/flarum-ext-sso/./src/admin/SettingsPage.tsx","webpack://@maicol07/flarum-ext-sso/./src/admin/index.tsx"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'admin/app');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'admin/components/ExtensionPage');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Button');","import ExtensionPage from 'flarum/admin/components/ExtensionPage';\nimport app from 'flarum/admin/app';\nimport Button from 'flarum/common/components/Button';\nexport class SettingsPage extends ExtensionPage {\n  content(vnode) {\n    const settings = app.extensionData.getSettings(this.extension.id);\n    const flarumSettings = this.flarumClientSettings(1);\n    return m(\"div\", {\n      className: \"ExtensionPage-settings\"\n    }, m(\"div\", {\n      className: \"container\"\n    }, m(\"div\", {\n      className: \"Form\"\n    }, m(\"div\", {\n      className: \"Form-group\"\n    }, this.buildSettingComponent({\n      type: 'checkbox',\n      label: 'Provider mode',\n      setting: 'maicol07-sso.provider_mode',\n      help: app.translator.trans('maicol07-sso.admin.settings.provider_mode'),\n      className: 'maicol07-sso--provider-mode'\n    }), m(\"div\", {\n      hidden: !this.booleanSetting('provider_mode')\n    }, m(\"div\", {\n      className: \"Form-group\"\n    }, m(\"table\", null, m(\"thead\", null, m(\"tr\", null, flarumSettings.map(setting => m(\"th\", {\n      key: setting.setting\n    }, setting.label, m(\"br\", null), m(\"span\", {\n      className: \"helpText\",\n      style: {\n        fontWeight: 'normal'\n      }\n    }, setting.help))))), m(\"tbody\", null, this.clientRows()))), m(Button, {\n      className: \"Button\",\n      \"aria-label\": \"Add instance\",\n      icon: \"fa fa-plus\",\n      onclick: this.addRow.bind(this)\n    }, \"Add Flarum instance\"))), m(\"div\", {\n      className: \"Form-group\",\n      hidden: this.booleanSetting('provider_mode')\n    }, m(\"hr\", null), m(\"div\", {\n      className: \"Form-group\"\n    }, this.generalClientSettings().map(this.buildSettingComponent.bind(this))), settings?.map(this.buildSettingComponent.bind(this)), m(\"hr\", null), m(\"div\", {\n      className: \"Form-group\"\n    }, m(\"h4\", null, app.translator.trans('maicol07-sso.admin.settings.jwt_section_subtitle')), this.jwtSettings().map(this.buildSettingComponent.bind(this)))), m(\"div\", {\n      className: \"Form-group\"\n    }, this.submitButton()))));\n  }\n  oncreate(vnode) {\n    super.oncreate(vnode);\n    this.setting('maicol07-sso.provider_mode').map(() => m.redraw());\n  }\n  addRow() {\n    const next = this.clientRows().length + 1;\n    app.data.settings[`maicol07-sso.client${next}_url`] = '';\n  }\n  clientRows() {\n    const clientRows = [];\n    let i = 1;\n    while (`maicol07-sso.client${i}_url` in app.data.settings) {\n      clientRows.push(m(\"tr\", {\n        key: `client${i}`\n      }, this.flarumClientSettings(i).map(setting => {\n        setting.label = undefined;\n        setting.help = undefined;\n        return m(\"td\", {\n          key: setting.setting\n        }, this.buildSettingComponent(setting));\n      })));\n      i++;\n    }\n    return clientRows;\n  }\n  flarumClientSettings(clientNumber) {\n    return [{\n      setting: `maicol07-sso.client${clientNumber}_name`,\n      type: 'text',\n      label: app.translator.trans('maicol07-sso.admin.settings.client_name'),\n      help: app.translator.trans('maicol07-sso.admin.settings.client_name_help')\n    }, {\n      setting: `maicol07-sso.client${clientNumber}_url`,\n      type: 'text',\n      label: app.translator.trans('maicol07-sso.admin.settings.client_url'),\n      help: app.translator.trans('maicol07-sso.admin.settings.client_url_help')\n    }, {\n      setting: `maicol07-sso.client${clientNumber}_api_key`,\n      type: 'password',\n      label: app.translator.trans('maicol07-sso.admin.settings.client_api_key'),\n      help: app.translator.trans('maicol07-sso.admin.settings.client_api_key_help')\n    }, {\n      setting: `maicol07-sso.client${clientNumber}_password_token`,\n      type: 'password',\n      label: app.translator.trans('maicol07-sso.admin.settings.client_password_token'),\n      help: app.translator.trans('maicol07-sso.admin.settings.client_password_token_help')\n    }, {\n      setting: `maicol07-sso.client${clientNumber}_verify_ssl`,\n      type: 'checkbox',\n      label: app.translator.trans('maicol07-sso.admin.settings.client_verify_ssl'),\n      help: app.translator.trans('maicol07-sso.admin.settings.client_verify_ssl_help')\n    }];\n  }\n  generalClientSettings() {\n    return [{\n      setting: 'maicol07-sso.login_url',\n      label: app.translator.trans('maicol07-sso.admin.settings.login_url'),\n      type: 'url'\n    }, {\n      setting: 'maicol07-sso.signup_url',\n      label: app.translator.trans('maicol07-sso.admin.settings.signup_url'),\n      type: 'url'\n    }, {\n      setting: 'maicol07-sso.logout_url',\n      label: app.translator.trans('maicol07-sso.admin.settings.logout_url'),\n      type: 'url'\n    }, {\n      setting: 'maicol07-sso.manage_account_url',\n      label: app.translator.trans('maicol07-sso.admin.settings.manage_account_url'),\n      type: 'url'\n    }, {\n      setting: 'maicol07-sso.cookies_prefix',\n      label: app.translator.trans('maicol07-sso.admin.settings.cookies_prefix'),\n      type: 'text'\n    }];\n  }\n  jwtSettings() {\n    return [{\n      setting: 'maicol07-sso.jwt_iss',\n      label: app.translator.trans('maicol07-sso.admin.settings.jwt_iss'),\n      type: 'text'\n    }, {\n      setting: 'maicol07-sso.jwt_signing_algorithm',\n      label: app.translator.trans('maicol07-sso.admin.settings.jwt_signing_algorithm'),\n      type: 'select',\n      options: {\n        Sha256: 'Sha256',\n        Sha384: 'Sha384',\n        Sha512: 'Sha512'\n      },\n      default: 'Sha256'\n    }, {\n      setting: 'maicol07-sso.jwt_signer_key',\n      label: app.translator.trans('maicol07-sso.admin.settings.jwt_signer_key'),\n      type: 'text'\n    }];\n  }\n  booleanSetting(setting) {\n    return Boolean(Number(this.setting(`maicol07-sso.${setting}`)()));\n  }\n}","import app from 'flarum/admin/app';\nimport { SettingsPage } from './SettingsPage';\napp.initializers.add('maicol07-sso', () => {\n  app.extensionData.for('maicol07-sso').registerSetting({\n    setting: 'maicol07-sso.manage_account_btn_open_in_new_tab',\n    label: app.translator.trans('maicol07-sso.admin.settings.manage_account_btn_open_in_new_tab'),\n    type: 'boolean'\n  }).registerSetting({\n    setting: 'maicol07-sso.remove_login_btn',\n    label: app.translator.trans('maicol07-sso.admin.settings.remove_login_btn'),\n    type: 'boolean'\n  }).registerSetting({\n    setting: 'maicol07-sso.remove_signup_btn',\n    label: app.translator.trans('maicol07-sso.admin.settings.remove_signup_btn'),\n    type: 'boolean'\n  }).registerPage(SettingsPage);\n});"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","flarum","reg","SettingsPage","content","vnode","settings","getSettings","this","extension","id","flarumSettings","flarumClientSettings","m","className","buildSettingComponent","type","label","setting","help","trans","hidden","booleanSetting","map","style","fontWeight","clientRows","icon","onclick","addRow","bind","generalClientSettings","jwtSettings","submitButton","oncreate","super","redraw","next","length","i","push","undefined","clientNumber","options","Sha256","Sha384","Sha512","default","Boolean","Number","add","for","registerSetting","registerPage"],"sourceRoot":""}