{"version":3,"file":"admin.js","mappings":"MACA,IAAIA,EAAsB,CCA1BA,EAAyBC,IACxB,IAAIC,EAASD,GAAUA,EAAOE,WAC7B,IAAOF,EAAiB,QACxB,IAAM,EAEP,OADAD,EAAoBI,EAAEF,EAAQ,CAAEG,EAAGH,IAC5BA,GCLRF,EAAwB,CAACM,EAASC,KACjC,IAAI,IAAIC,KAAOD,EACXP,EAAoBS,EAAEF,EAAYC,KAASR,EAAoBS,EAAEH,EAASE,IAC5EE,OAAOC,eAAeL,EAASE,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,MCJ3ER,EAAwB,CAACc,EAAKC,IAAUL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,I,mBCAlF,MAAM,EAA+BI,OAAOC,KAAKC,OAAO,a,aCAzC,SAASC,EAAgBb,EAAGc,GAKzC,OAJAD,EAAkBZ,OAAOc,eAAiBd,OAAOc,eAAeC,OAAS,SAAyBhB,EAAGc,GAEnG,OADAd,EAAEiB,UAAYH,EACPd,CACT,EACOa,EAAgBb,EAAGc,EAC5B,CCNA,MAAM,EAA+BJ,OAAOC,KAAKC,OAAO,kC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,4B,aCM3CM,EAAY,SAAAC,GCLV,IAAwBC,EAAUC,EDKxB,SAAAH,IAAA,OAAAC,EAAAG,MAAA,KAAAC,YAAA,KCLwBF,EDKxBF,GCLcC,EDKdF,GCJdX,UAAYN,OAAOuB,OAAOH,EAAWd,WAC9Ca,EAASb,UAAUkB,YAAcL,EACjCL,EAAeK,EAAUC,GDEF,IAAAK,EAAAR,EAAAX,UA0LtB,OA1LsBmB,EACvBC,QAAA,SAAQC,GACN,IAAMC,EAAWC,IAAAA,cAAkBC,YAAYC,KAAKC,UAAUC,IAExDC,EAAiBH,KAAKI,qBAAqB,GAEjD,OACEC,EAAA,OAAKC,UAAU,0BACbD,EAAA,OAAKC,UAAU,aACbD,EAAA,OAAKC,UAAU,QACbD,EAAA,OAAKC,UAAU,cACZN,KAAKO,sBAAsB,CAC1BC,KAAM,WACNC,MAAO,gBACPC,QAAS,6BACTC,KAAMb,IAAAA,WAAec,MAAM,6CAC3BN,UAAW,gCAEbD,EAAA,OAAKQ,QAASb,KAAKc,eAAe,kBAChCT,EAAA,OAAKC,UAAU,cACbD,EAAA,aACEA,EAAA,aACEA,EAAA,UACGF,EAAeY,IAAI,SAACL,GAAO,OAC1BL,EAAA,MAAItC,IAAK2C,EAAQA,SACdA,EAAQD,MACTJ,EAAA,WACAA,EAAA,QAAMC,UAAU,WAAWU,MAAO,CAAEC,WAAY,WAC7CP,EAAQC,MAER,KAIXN,EAAA,aAAQL,KAAKkB,gBAGjBb,EAACc,IAAM,CAACb,UAAU,SAAS,aAAW,eAAec,KAAK,aAAaC,QAASrB,KAAKsB,OAAOtC,KAAKgB,OAAO,yBAM5GK,EAAA,OAAKC,UAAU,aAAaO,OAAQb,KAAKc,eAAe,kBACtDT,EAAA,WACAA,EAAA,OAAKC,UAAU,cAAcN,KAAKuB,wBAAwBR,IAAIf,KAAKO,sBAAsBvB,KAAKgB,QACrF,MAARH,OAAQ,EAARA,EAAUkB,IAAIf,KAAKO,sBAAsBvB,KAAKgB,OAE/CK,EAAA,WAEAA,EAAA,OAAKC,UAAU,cACbD,EAAA,UAAKP,IAAAA,WAAec,MAAM,qDACzBZ,KAAKwB,cAAcT,IAAIf,KAAKO,sBAAsBvB,KAAKgB,SAI5DK,EAAA,OAAKC,UAAU,cAAcN,KAAKyB,kBAK5C,EAAC/B,EAEDgC,SAAA,SAAS9B,GACPT,EAAAZ,UAAMmD,SAAQjD,KAAC,KAAAmB,GACfI,KAAKU,QAAQ,8BAA8BK,IAAI,kBAAMV,EAAEsB,QAAQ,EACjE,EAACjC,EAED4B,OAAA,WACE,IAAMM,EAAO5B,KAAKkB,aAAaW,OAAS,EACxC/B,IAAAA,KAASD,SAAS,sBAAsB+B,EAAI,QAAU,EACxD,EAAClC,EAEDwB,WAAA,WAIE,IAJW,IAAAY,EAAA,KACLZ,EAAa,GAEfa,EAAI,EACD,sBAAsBA,EAAC,SAAUjC,IAAAA,KAASD,UAC/CqB,EAAWc,KACT3B,EAAA,MAAItC,IAAG,SAAWgE,GACf/B,KAAKI,qBAAqB2B,GAAGhB,IAAI,SAACL,GAGjC,OAFAA,EAAQD,WAAQwB,EAChBvB,EAAQC,UAAOsB,EACR5B,EAAA,MAAItC,IAAK2C,EAAQA,SAAUoB,EAAKvB,sBAAsBG,GAC/D,KAGJqB,IAGF,OAAOb,CACT,EAACxB,EAEDU,qBAAA,SAAqB8B,GACnB,MAAO,CACL,CACExB,QAAS,sBAAsBwB,EAAY,QAC3C1B,KAAM,OACNC,MAAOX,IAAAA,WAAec,MAAM,2CAC5BD,KAAMb,IAAAA,WAAec,MAAM,iDAE7B,CACEF,QAAS,sBAAsBwB,EAAY,OAC3C1B,KAAM,OACNC,MAAOX,IAAAA,WAAec,MAAM,0CAC5BD,KAAMb,IAAAA,WAAec,MAAM,gDAE7B,CACEF,QAAS,sBAAsBwB,EAAY,WAC3C1B,KAAM,WACNC,MAAOX,IAAAA,WAAec,MAAM,8CAC5BD,KAAMb,IAAAA,WAAec,MAAM,oDAE7B,CACEF,QAAS,sBAAsBwB,EAAY,kBAC3C1B,KAAM,WACNC,MAAOX,IAAAA,WAAec,MAAM,qDAC5BD,KAAMb,IAAAA,WAAec,MAAM,2DAE7B,CACEF,QAAS,sBAAsBwB,EAAY,cAC3C1B,KAAM,WACNC,MAAOX,IAAAA,WAAec,MAAM,iDAC5BD,KAAMb,IAAAA,WAAec,MAAM,uDAGjC,EAAClB,EAED6B,sBAAA,WACE,MAAO,CACL,CACEb,QAAS,yBACTD,MAAOX,IAAAA,WAAec,MAAM,yCAC5BJ,KAAM,OAER,CACEE,QAAS,0BACTD,MAAOX,IAAAA,WAAec,MAAM,0CAC5BJ,KAAM,OAER,CACEE,QAAS,0BACTD,MAAOX,IAAAA,WAAec,MAAM,0CAC5BJ,KAAM,OAER,CACEE,QAAS,kCACTD,MAAOX,IAAAA,WAAec,MAAM,kDAC5BJ,KAAM,OAER,CACEE,QAAS,8BACTD,MAAOX,IAAAA,WAAec,MAAM,8CAC5BJ,KAAM,QAGZ,EAACd,EAED8B,YAAA,WACE,MAAO,CACL,CACEd,QAAS,uBACTD,MAAOX,IAAAA,WAAec,MAAM,uCAC5BJ,KAAM,QAER,CACEE,QAAS,qCACTD,MAAOX,IAAAA,WAAec,MAAM,qDAC5BJ,KAAM,SACN2B,QAAS,CACPC,OAAQ,SACRC,OAAQ,SACRC,OAAQ,UAEVC,QAAS,UAEX,CACE7B,QAAS,8BACTD,MAAOX,IAAAA,WAAec,MAAM,8CAC5BJ,KAAM,QAGZ,EAACd,EAEDoB,eAAA,SAAeJ,GACb,OAAO8B,QAAQC,OAAOzC,KAAKU,QAAQ,gBAAgBA,EAA7BV,IACxB,EAACd,CAAA,CA1LsB,CAASwD,KEHlC5C,IAAAA,aAAiB6C,IAAI,eAAgB,WACnC7C,IAAAA,cAAiB,IACV,gBACJ8C,gBAAgB,CACflC,QAAS,kDACTD,MAAOX,IAAAA,WAAec,MAAM,kEAC5BJ,KAAM,YAEPoC,gBAAgB,CACflC,QAAS,gCACTD,MAAOX,IAAAA,WAAec,MAAM,gDAC5BJ,KAAM,YAEPoC,gBAAgB,CACflC,QAAS,iCACTD,MAAOX,IAAAA,WAAec,MAAM,iDAC5BJ,KAAM,YAEPqC,aAAa3D,EAClB,E","sources":["webpack://@maicol07/flarum-ext-sso/webpack/bootstrap","webpack://@maicol07/flarum-ext-sso/webpack/runtime/compat get default export","webpack://@maicol07/flarum-ext-sso/webpack/runtime/define property getters","webpack://@maicol07/flarum-ext-sso/webpack/runtime/hasOwnProperty shorthand","webpack://@maicol07/flarum-ext-sso/external root \"flarum.core.compat['admin/app']\"","webpack://@maicol07/flarum-ext-sso/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@maicol07/flarum-ext-sso/external root \"flarum.core.compat['admin/components/ExtensionPage']\"","webpack://@maicol07/flarum-ext-sso/external root \"flarum.core.compat['common/components/Button']\"","webpack://@maicol07/flarum-ext-sso/./src/admin/SettingsPage.tsx","webpack://@maicol07/flarum-ext-sso/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@maicol07/flarum-ext-sso/./src/admin/index.tsx"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/app'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/components/ExtensionPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","import ExtensionPage, { ExtensionPageAttrs } from 'flarum/admin/components/ExtensionPage';\nimport app from 'flarum/admin/app';\nimport Mithril from 'mithril';\nimport { SettingsComponentOptions } from 'flarum/admin/components/AdminPage';\nimport Button from 'flarum/common/components/Button';\n\nexport class SettingsPage extends ExtensionPage {\n  content(vnode: Mithril.VnodeDOM<ExtensionPageAttrs, this>): JSX.Element {\n    const settings = app.extensionData.getSettings(this.extension.id);\n\n    const flarumSettings = this.flarumClientSettings(1);\n\n    return (\n      <div className=\"ExtensionPage-settings\">\n        <div className=\"container\">\n          <div className=\"Form\">\n            <div className=\"Form-group\">\n              {this.buildSettingComponent({\n                type: 'checkbox',\n                label: 'Provider mode',\n                setting: 'maicol07-sso.provider_mode',\n                help: app.translator.trans('maicol07-sso.admin.settings.provider_mode'),\n                className: 'maicol07-sso--provider-mode',\n              })}\n              <div hidden={!this.booleanSetting('provider_mode')}>\n                <div className=\"Form-group\">\n                  <table>\n                    <thead>\n                      <tr>\n                        {flarumSettings.map((setting) => (\n                          <th key={setting.setting}>\n                            {setting.label}\n                            <br />\n                            <span className=\"helpText\" style={{ fontWeight: 'normal' }}>\n                              {setting.help}\n                            </span>\n                          </th>\n                        ))}\n                      </tr>\n                    </thead>\n                    <tbody>{this.clientRows()}</tbody>\n                  </table>\n                </div>\n                <Button className=\"Button\" aria-label=\"Add instance\" icon=\"fa fa-plus\" onclick={this.addRow.bind(this)}>\n                  Add Flarum instance\n                </Button>\n              </div>\n            </div>\n\n            <div className=\"Form-group\" hidden={this.booleanSetting('provider_mode')}>\n              <hr />\n              <div className=\"Form-group\">{this.generalClientSettings().map(this.buildSettingComponent.bind(this))}</div>\n              {settings?.map(this.buildSettingComponent.bind(this))}\n\n              <hr />\n\n              <div className=\"Form-group\">\n                <h4>{app.translator.trans('maicol07-sso.admin.settings.jwt_section_subtitle')}</h4>\n                {this.jwtSettings().map(this.buildSettingComponent.bind(this))}\n              </div>\n            </div>\n\n            <div className=\"Form-group\">{this.submitButton()}</div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  oncreate(vnode: Mithril.VnodeDOM<ExtensionPageAttrs, this>) {\n    super.oncreate(vnode);\n    this.setting('maicol07-sso.provider_mode').map(() => m.redraw());\n  }\n\n  addRow() {\n    const next = this.clientRows().length + 1;\n    app.data.settings[`maicol07-sso.client${next}_url`] = '';\n  }\n\n  clientRows() {\n    const clientRows = [];\n\n    let i = 1;\n    while (`maicol07-sso.client${i}_url` in app.data.settings) {\n      clientRows.push(\n        <tr key={`client${i}`}>\n          {this.flarumClientSettings(i).map((setting) => {\n            setting.label = undefined;\n            setting.help = undefined;\n            return <td key={setting.setting}>{this.buildSettingComponent(setting)}</td>;\n          })}\n        </tr>\n      );\n      i++;\n    }\n\n    return clientRows;\n  }\n\n  flarumClientSettings(clientNumber: number): SettingsComponentOptions[] {\n    return [\n      {\n        setting: `maicol07-sso.client${clientNumber}_name`,\n        type: 'text',\n        label: app.translator.trans('maicol07-sso.admin.settings.client_name'),\n        help: app.translator.trans('maicol07-sso.admin.settings.client_name_help'),\n      },\n      {\n        setting: `maicol07-sso.client${clientNumber}_url`,\n        type: 'text',\n        label: app.translator.trans('maicol07-sso.admin.settings.client_url'),\n        help: app.translator.trans('maicol07-sso.admin.settings.client_url_help'),\n      },\n      {\n        setting: `maicol07-sso.client${clientNumber}_api_key`,\n        type: 'password',\n        label: app.translator.trans('maicol07-sso.admin.settings.client_api_key'),\n        help: app.translator.trans('maicol07-sso.admin.settings.client_api_key_help'),\n      },\n      {\n        setting: `maicol07-sso.client${clientNumber}_password_token`,\n        type: 'password',\n        label: app.translator.trans('maicol07-sso.admin.settings.client_password_token'),\n        help: app.translator.trans('maicol07-sso.admin.settings.client_password_token_help'),\n      },\n      {\n        setting: `maicol07-sso.client${clientNumber}_verify_ssl`,\n        type: 'checkbox',\n        label: app.translator.trans('maicol07-sso.admin.settings.client_verify_ssl'),\n        help: app.translator.trans('maicol07-sso.admin.settings.client_verify_ssl_help'),\n      },\n    ];\n  }\n\n  generalClientSettings(): SettingsComponentOptions[] {\n    return [\n      {\n        setting: 'maicol07-sso.login_url',\n        label: app.translator.trans('maicol07-sso.admin.settings.login_url'),\n        type: 'url',\n      },\n      {\n        setting: 'maicol07-sso.signup_url',\n        label: app.translator.trans('maicol07-sso.admin.settings.signup_url'),\n        type: 'url',\n      },\n      {\n        setting: 'maicol07-sso.logout_url',\n        label: app.translator.trans('maicol07-sso.admin.settings.logout_url'),\n        type: 'url',\n      },\n      {\n        setting: 'maicol07-sso.manage_account_url',\n        label: app.translator.trans('maicol07-sso.admin.settings.manage_account_url'),\n        type: 'url',\n      },\n      {\n        setting: 'maicol07-sso.cookies_prefix',\n        label: app.translator.trans('maicol07-sso.admin.settings.cookies_prefix'),\n        type: 'text',\n      },\n    ];\n  }\n\n  jwtSettings(): SettingsComponentOptions[] {\n    return [\n      {\n        setting: 'maicol07-sso.jwt_iss',\n        label: app.translator.trans('maicol07-sso.admin.settings.jwt_iss'),\n        type: 'text',\n      },\n      {\n        setting: 'maicol07-sso.jwt_signing_algorithm',\n        label: app.translator.trans('maicol07-sso.admin.settings.jwt_signing_algorithm'),\n        type: 'select',\n        options: {\n          Sha256: 'Sha256',\n          Sha384: 'Sha384',\n          Sha512: 'Sha512',\n        },\n        default: 'Sha256',\n      },\n      {\n        setting: 'maicol07-sso.jwt_signer_key',\n        label: app.translator.trans('maicol07-sso.admin.settings.jwt_signer_key'),\n        type: 'text',\n      },\n    ];\n  }\n\n  booleanSetting(setting: string): boolean {\n    return Boolean(Number(this.setting(`maicol07-sso.${setting}`)()));\n  }\n}\n","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","import app from 'flarum/admin/app';\nimport { SettingsPage } from './SettingsPage';\n\napp.initializers.add('maicol07-sso', () => {\n  app.extensionData\n    .for('maicol07-sso')\n    .registerSetting({\n      setting: 'maicol07-sso.manage_account_btn_open_in_new_tab',\n      label: app.translator.trans('maicol07-sso.admin.settings.manage_account_btn_open_in_new_tab'),\n      type: 'boolean',\n    })\n    .registerSetting({\n      setting: 'maicol07-sso.remove_login_btn',\n      label: app.translator.trans('maicol07-sso.admin.settings.remove_login_btn'),\n      type: 'boolean',\n    })\n    .registerSetting({\n      setting: 'maicol07-sso.remove_signup_btn',\n      label: app.translator.trans('maicol07-sso.admin.settings.remove_signup_btn'),\n      type: 'boolean',\n    })\n    .registerPage(SettingsPage);\n});\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","flarum","core","compat","_setPrototypeOf","p","setPrototypeOf","bind","__proto__","SettingsPage","_ExtensionPage","subClass","superClass","apply","arguments","create","constructor","_proto","content","vnode","settings","app","getSettings","this","extension","id","flarumSettings","flarumClientSettings","m","className","buildSettingComponent","type","label","setting","help","trans","hidden","booleanSetting","map","style","fontWeight","clientRows","Button","icon","onclick","addRow","generalClientSettings","jwtSettings","submitButton","oncreate","redraw","next","length","_this","i","push","undefined","clientNumber","options","Sha256","Sha384","Sha512","default","Boolean","Number","ExtensionPage","add","registerSetting","registerPage"],"sourceRoot":""}