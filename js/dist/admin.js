(()=>{var t={n:e=>{var s=e&&e.__esModule?()=>e.default:()=>e;return t.d(s,{a:s}),s},d:(e,s)=>{for(var n in s)t.o(s,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:s[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};(()=>{"use strict";t.r(e);const s=flarum.core.compat["admin/app"];var n=t.n(s);function i(t,e){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},i(t,e)}const a=flarum.core.compat["admin/components/ExtensionPage"];var o=t.n(a);const l=flarum.core.compat["common/components/Button"];var r=t.n(l),c=function(t){var e,s;function a(){return t.apply(this,arguments)||this}s=t,(e=a).prototype=Object.create(s.prototype),e.prototype.constructor=e,i(e,s);var o=a.prototype;return o.content=function(t){var e=n().extensionData.getSettings(this.extension.id),s=this.flarumClientSettings(1);return m("div",{className:"ExtensionPage-settings"},m("div",{className:"container"},m("div",{className:"Form"},m("div",{className:"Form-group"},this.buildSettingComponent({type:"checkbox",label:"Provider mode",setting:"maicol07-sso.provider_mode",help:n().translator.trans("maicol07-sso.admin.settings.provider_mode"),className:"maicol07-sso--provider-mode"}),m("div",{hidden:!this.booleanSetting("provider_mode")},m("div",{className:"Form-group"},m("table",null,m("thead",null,m("tr",null,s.map((function(t){return m("th",{key:t.setting},t.label,m("br",null),m("span",{className:"helpText",style:{fontWeight:"normal"}},t.help))})))),m("tbody",null,this.clientRows()))),m(r(),{className:"Button","aria-label":"Add instance",icon:"fa fa-plus",onclick:this.addRow.bind(this)},"Add Flarum instance"))),m("div",{className:"Form-group",hidden:this.booleanSetting("provider_mode")},m("hr",null),m("div",{className:"Form-group"},this.generalClientSettings().map(this.buildSettingComponent.bind(this))),null==e?void 0:e.map(this.buildSettingComponent.bind(this)),m("hr",null),m("div",{className:"Form-group"},m("h4",null,n().translator.trans("maicol07-sso.admin.settings.jwt_section_subtitle")),this.jwtSettings().map(this.buildSettingComponent.bind(this)))),m("div",{className:"Form-group"},this.submitButton()))))},o.oncreate=function(e){t.prototype.oncreate.call(this,e),this.setting("maicol07-sso.provider_mode").map((function(){return m.redraw()}))},o.addRow=function(){var t=this.clientRows().length+1;n().data.settings["maicol07-sso.client"+t+"_url"]=""},o.clientRows=function(){for(var t=this,e=[],s=1;"maicol07-sso.client"+s+"_url"in n().data.settings;)e.push(m("tr",{key:"client"+s},this.flarumClientSettings(s).map((function(e){return e.label=void 0,e.help=void 0,m("td",{key:e.setting},t.buildSettingComponent(e))})))),s++;return e},o.flarumClientSettings=function(t){return[{setting:"maicol07-sso.client"+t+"_name",type:"text",label:n().translator.trans("maicol07-sso.admin.settings.client_name"),help:n().translator.trans("maicol07-sso.admin.settings.client_name_help")},{setting:"maicol07-sso.client"+t+"_url",type:"text",label:n().translator.trans("maicol07-sso.admin.settings.client_url"),help:n().translator.trans("maicol07-sso.admin.settings.client_url_help")},{setting:"maicol07-sso.client"+t+"_api_key",type:"password",label:n().translator.trans("maicol07-sso.admin.settings.client_api_key"),help:n().translator.trans("maicol07-sso.admin.settings.client_api_key_help")},{setting:"maicol07-sso.client"+t+"_password_token",type:"password",label:n().translator.trans("maicol07-sso.admin.settings.client_password_token"),help:n().translator.trans("maicol07-sso.admin.settings.client_password_token_help")},{setting:"maicol07-sso.client"+t+"_verify_ssl",type:"checkbox",label:n().translator.trans("maicol07-sso.admin.settings.client_verify_ssl"),help:n().translator.trans("maicol07-sso.admin.settings.client_verify_ssl_help")}]},o.generalClientSettings=function(){return[{setting:"maicol07-sso.login_url",label:n().translator.trans("maicol07-sso.admin.settings.login_url"),type:"url"},{setting:"maicol07-sso.signup_url",label:n().translator.trans("maicol07-sso.admin.settings.signup_url"),type:"url"},{setting:"maicol07-sso.logout_url",label:n().translator.trans("maicol07-sso.admin.settings.logout_url"),type:"url"},{setting:"maicol07-sso.manage_account_url",label:n().translator.trans("maicol07-sso.admin.settings.manage_account_url"),type:"url"},{setting:"maicol07-sso.cookies_prefix",label:n().translator.trans("maicol07-sso.admin.settings.cookies_prefix"),type:"text"}]},o.jwtSettings=function(){return[{setting:"maicol07-sso.jwt_iss",label:n().translator.trans("maicol07-sso.admin.settings.jwt_iss"),type:"text"},{setting:"maicol07-sso.jwt_signing_algorithm",label:n().translator.trans("maicol07-sso.admin.settings.jwt_signing_algorithm"),type:"select",options:{Sha256:"Sha256",Sha384:"Sha384",Sha512:"Sha512"},default:"Sha256"},{setting:"maicol07-sso.jwt_signer_key",label:n().translator.trans("maicol07-sso.admin.settings.jwt_signer_key"),type:"text"}]},o.booleanSetting=function(t){return Boolean(Number(this.setting("maicol07-sso."+t)()))},a}(o());n().initializers.add("maicol07-sso",(function(){n().extensionData.for("maicol07-sso").registerSetting({setting:"maicol07-sso.manage_account_btn_open_in_new_tab",label:n().translator.trans("maicol07-sso.admin.settings.manage_account_btn_open_in_new_tab"),type:"boolean"}).registerSetting({setting:"maicol07-sso.remove_login_btn",label:n().translator.trans("maicol07-sso.admin.settings.remove_login_btn"),type:"boolean"}).registerSetting({setting:"maicol07-sso.remove_signup_btn",label:n().translator.trans("maicol07-sso.admin.settings.remove_signup_btn"),type:"boolean"}).registerSetting({setting:"maicol07-sso.disable_self_activation",label:n().translator.trans("maicol07-sso.admin.settings.disable_self_activation"),type:"boolean"}).registerPage(c)}))})(),module.exports=e})();
//# sourceMappingURL=admin.js.map