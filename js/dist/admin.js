(()=>{var t={n:s=>{var e=s&&s.__esModule?()=>s.default:()=>s;return t.d(e,{a:e}),e},d:(s,e)=>{for(var n in e)t.o(e,n)&&!t.o(s,n)&&Object.defineProperty(s,n,{enumerable:!0,get:e[n]})},o:(t,s)=>Object.prototype.hasOwnProperty.call(t,s)};(()=>{"use strict";const s=flarum.reg.get("core","admin/app");var e=t.n(s);const n=flarum.reg.get("core","admin/components/ExtensionPage");var a=t.n(n);const i=flarum.reg.get("core","common/components/Button");var o=t.n(i);class l extends(a()){content(t){const s=e().extensionData.getSettings(this.extension.id),n=this.flarumClientSettings(1);return m("div",{className:"ExtensionPage-settings"},m("div",{className:"container"},m("div",{className:"Form"},m("div",{className:"Form-group"},this.buildSettingComponent({type:"checkbox",label:"Provider mode",setting:"maicol07-sso.provider_mode",help:e().translator.trans("maicol07-sso.admin.settings.provider_mode"),className:"maicol07-sso--provider-mode"}),m("div",{hidden:!this.booleanSetting("provider_mode")},m("div",{className:"Form-group"},m("table",null,m("thead",null,m("tr",null,n.map(t=>m("th",{key:t.setting},t.label,m("br",null),m("span",{className:"helpText",style:{fontWeight:"normal"}},t.help))))),m("tbody",null,this.clientRows()))),m(o(),{className:"Button","aria-label":"Add instance",icon:"fa fa-plus",onclick:this.addRow.bind(this)},"Add Flarum instance"))),m("div",{className:"Form-group",hidden:this.booleanSetting("provider_mode")},m("hr",null),m("div",{className:"Form-group"},this.generalClientSettings().map(this.buildSettingComponent.bind(this))),s?.map(this.buildSettingComponent.bind(this)),m("hr",null),m("div",{className:"Form-group"},m("h4",null,e().translator.trans("maicol07-sso.admin.settings.jwt_section_subtitle")),this.jwtSettings().map(this.buildSettingComponent.bind(this)))),m("div",{className:"Form-group"},this.submitButton()))))}oncreate(t){super.oncreate(t),this.setting("maicol07-sso.provider_mode").map(()=>m.redraw())}addRow(){const t=this.clientRows().length+1;e().data.settings[`maicol07-sso.client${t}_url`]=""}clientRows(){const t=[];let s=1;for(;`maicol07-sso.client${s}_url`in e().data.settings;)t.push(m("tr",{key:`client${s}`},this.flarumClientSettings(s).map(t=>(t.label=void 0,t.help=void 0,m("td",{key:t.setting},this.buildSettingComponent(t)))))),s++;return t}flarumClientSettings(t){return[{setting:`maicol07-sso.client${t}_name`,type:"text",label:e().translator.trans("maicol07-sso.admin.settings.client_name"),help:e().translator.trans("maicol07-sso.admin.settings.client_name_help")},{setting:`maicol07-sso.client${t}_url`,type:"text",label:e().translator.trans("maicol07-sso.admin.settings.client_url"),help:e().translator.trans("maicol07-sso.admin.settings.client_url_help")},{setting:`maicol07-sso.client${t}_api_key`,type:"password",label:e().translator.trans("maicol07-sso.admin.settings.client_api_key"),help:e().translator.trans("maicol07-sso.admin.settings.client_api_key_help")},{setting:`maicol07-sso.client${t}_password_token`,type:"password",label:e().translator.trans("maicol07-sso.admin.settings.client_password_token"),help:e().translator.trans("maicol07-sso.admin.settings.client_password_token_help")},{setting:`maicol07-sso.client${t}_verify_ssl`,type:"checkbox",label:e().translator.trans("maicol07-sso.admin.settings.client_verify_ssl"),help:e().translator.trans("maicol07-sso.admin.settings.client_verify_ssl_help")}]}generalClientSettings(){return[{setting:"maicol07-sso.login_url",label:e().translator.trans("maicol07-sso.admin.settings.login_url"),type:"url"},{setting:"maicol07-sso.signup_url",label:e().translator.trans("maicol07-sso.admin.settings.signup_url"),type:"url"},{setting:"maicol07-sso.logout_url",label:e().translator.trans("maicol07-sso.admin.settings.logout_url"),type:"url"},{setting:"maicol07-sso.manage_account_url",label:e().translator.trans("maicol07-sso.admin.settings.manage_account_url"),type:"url"},{setting:"maicol07-sso.cookies_prefix",label:e().translator.trans("maicol07-sso.admin.settings.cookies_prefix"),type:"text"}]}jwtSettings(){return[{setting:"maicol07-sso.jwt_iss",label:e().translator.trans("maicol07-sso.admin.settings.jwt_iss"),type:"text"},{setting:"maicol07-sso.jwt_signing_algorithm",label:e().translator.trans("maicol07-sso.admin.settings.jwt_signing_algorithm"),type:"select",options:{Sha256:"Sha256",Sha384:"Sha384",Sha512:"Sha512"},default:"Sha256"},{setting:"maicol07-sso.jwt_signer_key",label:e().translator.trans("maicol07-sso.admin.settings.jwt_signer_key"),type:"text"}]}booleanSetting(t){return Boolean(Number(this.setting(`maicol07-sso.${t}`)()))}}e().initializers.add("maicol07-sso",()=>{e().extensionData.for("maicol07-sso").registerSetting({setting:"maicol07-sso.manage_account_btn_open_in_new_tab",label:e().translator.trans("maicol07-sso.admin.settings.manage_account_btn_open_in_new_tab"),type:"boolean"}).registerSetting({setting:"maicol07-sso.remove_login_btn",label:e().translator.trans("maicol07-sso.admin.settings.remove_login_btn"),type:"boolean"}).registerSetting({setting:"maicol07-sso.remove_signup_btn",label:e().translator.trans("maicol07-sso.admin.settings.remove_signup_btn"),type:"boolean"}).registerPage(l)})})(),module.exports={}})();
//# sourceMappingURL=admin.js.map